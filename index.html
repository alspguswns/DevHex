<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DevHex – 내 영혼의 색 (10문항 완전판 데모)</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* slider style */
    input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:9999px; background:#111; cursor:pointer; }
    input[type=range]::-webkit-slider-runnable-track{ height:6px; border-radius:9999px; background:linear-gradient(90deg,#ef4444,#22c55e,#3b82f6); }
    input[type=range]{ appearance:none; height:6px; border-radius:9999px; background:linear-gradient(90deg,#ef4444,#22c55e,#3b82f6); }
    input[type=range]::-moz-range-thumb{ width:18px; height:18px; border-radius:9999px; background:#111; border:none; }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">
  <header class="max-w-5xl mx-auto px-6 py-10">
    <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">DevHex – 내 영혼의 색 (10문항 데모)</h1>
    <p class="mt-3 text-slate-600">슬라이더(5) + 객관식(5)으로 응답하면 <span class="font-semibold">RGB → HEX</span>로 고유 색이 생성됩니다. (실서비스용 기초 구조)</p>
  </header>

  <main class="max-w-5xl mx-auto px-6 grid lg:grid-cols-2 gap-8 pb-20">
    <!-- Left: Form -->
    <section class="space-y-8 order-2 lg:order-1">
      <!-- SLIDERS -->
      <div class="bg-white rounded-2xl shadow p-6">
        <h2 class="text-lg font-bold">A. 슬라이드형 (5)</h2>
        <p class="text-sm text-slate-500 mb-4">각 문항을 0~100 사이에서 조절하세요.</p>

        <!-- Q1 -->
        <div class="py-4 border-t first:border-t-0">
          <label for="q1" class="block text-sm font-semibold text-slate-700">Q1. 감정 표현: 숨김 🤐 ↔ 솔직 💬</label>
          <div class="mt-3 flex items-center gap-3">
            <span class="text-xs text-slate-500">숨김</span>
            <input id="q1" type="range" min="0" max="100" value="50" class="flex-1" />
            <span class="text-xs text-slate-500">솔직</span>
          </div>
          <div class="mt-1 text-right text-xs text-slate-500"><span id="q1v">50</span>/100</div>
        </div>

        <!-- Q2 -->
        <div class="py-4 border-t">
          <label for="q2" class="block text-sm font-semibold text-slate-700">Q2. 생활 방식: 계획적 📅 ↔ 즉흥적 🎲</label>
          <div class="mt-3 flex items-center gap-3">
            <span class="text-xs text-slate-500">계획적</span>
            <input id="q2" type="range" min="0" max="100" value="50" class="flex-1" />
            <span class="text-xs text-slate-500">즉흥적</span>
          </div>
          <div class="mt-1 text-right text-xs text-slate-500"><span id="q2v">50</span>/100</div>
        </div>

        <!-- Q3 -->
        <div class="py-4 border-t">
          <label for="q3" class="block text-sm font-semibold text-slate-700">Q3. 에너지 원천: 혼자일 때 🌙 ↔ 사람들과 🌞</label>
          <div class="mt-3 flex items-center gap-3">
            <span class="text-xs text-slate-500">혼자</span>
            <input id="q3" type="range" min="0" max="100" value="50" class="flex-1" />
            <span class="text-xs text-slate-500">사람들</span>
          </div>
          <div class="mt-1 text-right text-xs text-slate-500"><span id="q3v">50</span>/100</div>
        </div>

        <!-- Q4 -->
        <div class="py-4 border-t">
          <label for="q4" class="block text-sm font-semibold text-slate-700">Q4. 사고 초점: 디테일 🔍 ↔ 큰 그림 🌍</label>
          <div class="mt-3 flex items-center gap-3">
            <span class="text-xs text-slate-500">디테일</span>
            <input id="q4" type="range" min="0" max="100" value="50" class="flex-1" />
            <span class="text-xs text-slate-500">큰 그림</span>
          </div>
          <div class="mt-1 text-right text-xs text-slate-500"><span id="q4v">50</span>/100</div>
        </div>

        <!-- Q5 -->
        <div class="py-4 border-t">
          <label for="q5" class="block text-sm font-semibold text-slate-700">Q5. 위험 성향: 회피 ⛔ ↔ 도전 🚀</label>
          <div class="mt-3 flex items-center gap-3">
            <span class="text-xs text-slate-500">회피</span>
            <input id="q5" type="range" min="0" max="100" value="50" class="flex-1" />
            <span class="text-xs text-slate-500">도전</span>
          </div>
          <div class="mt-1 text-right text-xs text-slate-500"><span id="q5v">50</span>/100</div>
        </div>
      </div>

      <!-- MCQ -->
      <div class="bg-white rounded-2xl shadow p-6">
        <h2 class="text-lg font-bold">B. 객관식 (4지선다 × 5)</h2>
        <p class="text-sm text-slate-500 mb-4">한 문항당 하나씩 선택하세요.</p>

        <!-- helper: radio group builder uses data-r/g/b for weights -->
        <fieldset class="py-4">
          <legend class="block text-sm font-semibold text-slate-700 mb-2">Q6. 좋아하는 계절은?</legend>
          <div class="grid sm:grid-cols-2 gap-2 text-sm">
            <label class="flex items-center gap-2 p-2 border rounded-lg">
              <input type="radio" name="q6" data-r="10" data-g="20" data-b="0" /> 봄
            </label>
            <label class="flex items-center gap-2 p-2 border rounded-lg">
              <input type="radio" name="q6" data-r="0" data-g="0" data-b="30" /> 여름
            </label>
            <label class="flex items-center gap-2 p-2 border rounded-lg">
              <input type="radio" name="q6" data-r="20" data-g="10" data-b="0" /> 가을
            </label>
            <label class="flex items-center gap-2 p-2 border rounded-lg">
              <input type="radio" name="q6" data-r="0" data-g="10" data-b="20" /> 겨울
            </label>
          </div>
        </fieldset>

        <fieldset class="py-4 border-t">
          <legend class="block text-sm font-semibold text-slate-700 mb-2">Q7. 스트레스를 풀 때 나는…</legend>
          <div class="grid sm:grid-cols-2 gap-2 text-sm">
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q7" data-r="20" data-g="10" data-b="0"/> 친구들과 수다</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q7" data-r="0" data-g="0" data-b="30"/> 음악 감상</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q7" data-r="10" data-g="0" data-b="20"/> 혼자 사색</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q7" data-r="30" data-g="0" data-b="0"/> 운동</label>
          </div>
        </fieldset>

        <fieldset class="py-4 border-t">
          <legend class="block text-sm font-semibold text-slate-700 mb-2">Q8. 가장 끌리는 풍경은?</legend>
          <div class="grid sm:grid-cols-2 gap-2 text-sm">
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q8" data-r="0" data-g="0" data-b="30"/> 바다</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q8" data-r="0" data-g="30" data-b="0"/> 숲</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q8" data-r="30" data-g="0" data-b="0"/> 노을</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q8" data-r="10" data-g="10" data-b="10"/> 맑은 하늘</label>
          </div>
        </fieldset>

        <fieldset class="py-4 border-t">
          <legend class="block text-sm font-semibold text-slate-700 mb-2">Q9. 사람들이 나를 어떻게 보길 원하나요?</legend>
          <div class="grid sm:grid-cols-2 gap-2 text-sm">
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q9" data-r="20" data-g="20" data-b="0"/> 밝고 활발하게</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q9" data-r="0" data-g="0" data-b="30"/> 신뢰감 있게</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q9" data-r="15" data-g="0" data-b="15"/> 창의적·개성 있게</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q9" data-r="20" data-g="10" data-b="0"/> 따뜻하고 다정하게</label>
          </div>
        </fieldset>

        <fieldset class="py-4 border-t">
          <legend class="block text-sm font-semibold text-slate-700 mb-2">Q10. 이상적인 하루는?</legend>
          <div class="grid sm:grid-cols-2 gap-2 text-sm">
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q10" data-r="30" data-g="0" data-b="0"/> 활력 넘치는 하루</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q10" data-r="0" data-g="30" data-b="0"/> 평화로운 하루</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q10" data-r="15" data-g="0" data-b="15"/> 영감 가득한 하루</label>
            <label class="flex items-center gap-2 p-2 border rounded-lg"><input type="radio" name="q10" data-r="0" data-g="10" data-b="20"/> 차분히 정리되는 하루</label>
          </div>
        </fieldset>

        <div class="mt-4 flex flex-wrap gap-3">
          <button id="resetBtn" class="px-4 py-2 rounded-xl bg-slate-200 hover:bg-slate-300 text-slate-800 font-medium shadow">초기화</button>
          <button id="randomBtn" class="px-4 py-2 rounded-xl bg-slate-900 hover:bg-black text-white font-medium shadow">랜덤</button>
        </div>
      </div>
    </section>

    <!-- Right: Result -->
    <aside class="bg-white rounded-2xl shadow p-6 flex flex-col gap-4 lg:sticky lg:top-6 h-fit order-1 lg:order-2">
      <div>
        <h2 class="text-xl font-bold">결과</h2>
        <p class="text-slate-500 text-sm">응답에 따라 실시간으로 색상이 생성됩니다.</p>
      </div>

      <div id="swatch" class="h-48 w-full rounded-2xl shadow-inner border border-slate-200"></div>

      <div class="grid grid-cols-3 gap-3 text-sm">
        <div class="p-3 rounded-xl bg-slate-50 border"><div class="text-xs text-slate-500">R</div><div id="rVal" class="font-semibold">0</div></div>
        <div class="p-3 rounded-xl bg-slate-50 border"><div class="text-xs text-slate-500">G</div><div id="gVal" class="font-semibold">0</div></div>
        <div class="p-3 rounded-xl bg-slate-50 border"><div class="text-xs text-slate-500">B</div><div id="bVal" class="font-semibold">0</div></div>
      </div>

      <div class="flex items-center gap-3">
        <div class="text-lg font-mono font-semibold" id="hex">#000000</div>
        <button id="copyBtn" class="px-3 py-2 rounded-lg bg-slate-900 text-white text-sm hover:bg-black">HEX 복사</button>
      </div>

      <div>
        <div class="flex items-center justify-between mb-2">
          <h3 class="text-sm font-semibold text-slate-700">성격 키워드</h3>
          <div class="text-xs text-slate-500">완료율: <span id="progress">50</span>%</div>
        </div>
        <div id="keywords" class="flex flex-wrap gap-2 text-xs"></div>
      </div>

      <p class="text-xs text-slate-500 mt-2">※ 데모는 클라이언트 계산으로 동작합니다. 실제 서비스에서는 가중치 보정, 응답 저장(DB), 공유 이미지(OG) 등을 추가하세요.</p>
    </aside>
  </main>

  <footer class="max-w-5xl mx-auto px-6 pb-12 text-center text-xs text-slate-500">© DevHex Demo – Color Psychology Test</footer>

  <script>
    // ===== SLIDERS =====
    const sliders = [1,2,3,4,5].map(i=>({
      input: document.getElementById(`q${i}`),
      view: document.getElementById(`q${i}v`)
    }));

    // ===== RADIO GROUPS (MCQ) =====
    const mcqNames = ['q6','q7','q8','q9','q10'];

    const swatch = document.getElementById('swatch');
    const hexEl = document.getElementById('hex');
    const rEl = document.getElementById('rVal');
    const gEl = document.getElementById('gVal');
    const bEl = document.getElementById('bVal');
    const copyBtn = document.getElementById('copyBtn');
    const resetBtn = document.getElementById('resetBtn');
    const randomBtn = document.getElementById('randomBtn');
    const keywordsEl = document.getElementById('keywords');
    const progressEl = document.getElementById('progress');

    const clamp255 = (x) => Math.max(0, Math.min(255, x));
    const toHex = (n) => n.toString(16).padStart(2, '0');

    function progress() {
      // 5 sliders are always answered; count selected radios
      const answeredMCQ = mcqNames.reduce((acc,name)=> acc + (document.querySelector(`input[name="${name}"]:checked`)?1:0), 0);
      const pct = Math.round(((5 + answeredMCQ) / 10) * 100);
      progressEl.textContent = pct;
    }

    function computeRGB() {
      // Sliders
      const v = sliders.map(s=> Number(s.input.value));
      // v[0]=Q1 숨김↔솔직, v[1]=Q2 계획↔즉흥, v[2]=Q3 혼자↔사람, v[3]=Q4 디테일↔큰그림, v[4]=Q5 회피↔도전
      let R=0, G=0, B=0;

      // Q1: R += v1; B += (100-v1)
      R += v[0];
      B += (100 - v[0]);

      // Q2: G += (100-v2); R += v2
      G += (100 - v[1]);
      R += v[1];

      // Q3: B += (100-v3); R += v3
      B += (100 - v[2]);
      R += v[2];

      // Q4: G += (100-v4); R += 0.5*v4; B += 0.5*v4
      G += (100 - v[3]);
      R += 0.5 * v[3];
      B += 0.5 * v[3];

      // Q5: G += (100-v5); R += v5
      G += (100 - v[4]);
      R += v[4];

      // MCQ add-ons
      mcqNames.forEach(name=>{
        const sel = document.querySelector(`input[name="${name}"]:checked`);
        if(!sel) return;
        R += Number(sel.dataset.r||0);
        G += Number(sel.dataset.g||0);
        B += Number(sel.dataset.b||0);
      });

      // Normalize: scale by max channel to 255 (preserves hue, maximizes vividness)
      const maxVal = Math.max(R, G, B, 1);
      const scale = 255 / maxVal;
      R = Math.round(clamp255(R * scale));
      G = Math.round(clamp255(G * scale));
      B = Math.round(clamp255(B * scale));

      return { R, G, B };
    }

    function render() {
      sliders.forEach(s=> s.view.textContent = s.input.value);
      const { R, G, B } = computeRGB();
      const hex = `#${toHex(R)}${toHex(G)}${toHex(B)}`.toUpperCase();
      swatch.style.backgroundColor = hex;
      hexEl.textContent = hex;
      rEl.textContent = R; gEl.textContent = G; bEl.textContent = B;

      // keywords by channel ranking
      const channels = [
        { k: '에너지', v: R, alt: ['열정','도전'] },
        { k: '안정', v: G, alt: ['균형','친화'] },
        { k: '차분', v: B, alt: ['신뢰','사색'] },
      ].sort((a,b)=>b.v-a.v);

      keywordsEl.innerHTML = '';
      const pills = [channels[0].k, channels[1].alt[0], channels[2].alt[1]];
      pills.forEach(t=>{
        const span = document.createElement('span');
        span.className = 'px-2.5 py-1 rounded-full bg-slate-100 border text-slate-700';
        span.textContent = t;
        keywordsEl.appendChild(span);
      });

      progress();
    }

    // events
    sliders.forEach(s=> s.input.addEventListener('input', render));
    mcqNames.forEach(name=>{
      document.querySelectorAll(`input[name="${name}"]`).forEach(r=> r.addEventListener('change', render));
    });

    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(hexEl.textContent);
        copyBtn.textContent = '복사됨!';
        setTimeout(()=> copyBtn.textContent = 'HEX 복사', 1200);
      }catch(e){ alert('복사에 실패했어요.'); }
    });

    resetBtn.addEventListener('click', ()=>{
      sliders.forEach(s=> s.input.value = 50);
      mcqNames.forEach(name=>{
        document.querySelectorAll(`input[name="${name}"]`).forEach(r=> r.checked=false);
      });
      render();
    });

    randomBtn.addEventListener('click', ()=>{
      sliders.forEach(s=> s.input.value = Math.floor(Math.random()*101));
      mcqNames.forEach(name=>{
        const opts = Array.from(document.querySelectorAll(`input[name="${name}"]`));
        const pick = opts[Math.floor(Math.random()*opts.length)];
        opts.forEach(o=> o.checked = false);
        if(pick) pick.checked = true;
      });
      render();
    });

    // initial render
    render();
  </script>
</body>
</html>
