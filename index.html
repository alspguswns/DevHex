<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë‚´ ì˜í˜¼ì˜ ìƒ‰ - í…ŒìŠ¤íŠ¸(ë°ëª¨)</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* slider style (webkit) */
    input[type=range]::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:9999px; background:#111; cursor:pointer; }
    input[type=range]::-webkit-slider-runnable-track{ height:6px; border-radius:9999px; background:linear-gradient(90deg,#ef4444,#22c55e,#3b82f6); }
    /* firefox */
    input[type=range]{ appearance:none; height:6px; border-radius:9999px; background:linear-gradient(90deg,#ef4444,#22c55e,#3b82f6); }
    input[type=range]::-moz-range-thumb{ width:18px; height:18px; border-radius:9999px; background:#111; border:none; }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">
  <header class="max-w-4xl mx-auto px-6 py-10">
    <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">ë‚´ ì˜í˜¼ì˜ ìƒ‰ â€“ ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸ (3ë¬¸í•­ ë°ëª¨)</h1>
    <p class="mt-3 text-slate-600">ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ì§€ê¸ˆì˜ ë‹¹ì‹ ì„ ê°€ì¥ ì˜ ë‚˜íƒ€ë‚´ ë³´ì„¸ìš”. ì‘ë‹µì— ë”°ë¼ <span class="font-semibold">ê³ ìœ í•œ HEX ìƒ‰ìƒ</span>ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
  </header>

  <main class="max-w-4xl mx-auto px-6 grid md:grid-cols-2 gap-8 pb-16">
    <!-- Left: Form -->
    <section class="space-y-8">
      <!-- Q1 -->
      <div class="bg-white rounded-2xl shadow p-6">
        <label for="q1" class="block text-sm font-semibold text-slate-700">Q1. ì§€ê¸ˆ ë‚˜ëŠ” <span class="text-sky-600">ì°¨ë¶„í•¨</span> ğŸ•Šï¸ â†” <span class="text-rose-600">ì—ë„ˆì§€</span> ğŸ”¥</label>
        <div class="mt-4 flex items-center gap-3">
          <span class="text-xs text-slate-500">ì°¨ë¶„í•¨</span>
          <input id="q1" type="range" min="0" max="100" value="50" class="flex-1" />
          <span class="text-xs text-slate-500">ì—ë„ˆì§€</span>
        </div>
        <div class="mt-2 text-right text-sm text-slate-500"><span id="q1v">50</span>/100</div>
      </div>
      <!-- Q2 -->
      <div class="bg-white rounded-2xl shadow p-6">
        <label for="q2" class="block text-sm font-semibold text-slate-700">Q2. ë‚˜ëŠ” <span class="text-indigo-700">ë…¼ë¦¬</span> ğŸ” â†” <span class="text-fuchsia-700">ì§ê´€/ì°½ì˜</span> âœ¨</label>
        <div class="mt-4 flex items-center gap-3">
          <span class="text-xs text-slate-500">ë…¼ë¦¬</span>
          <input id="q2" type="range" min="0" max="100" value="50" class="flex-1" />
          <span class="text-xs text-slate-500">ì§ê´€</span>
        </div>
        <div class="mt-2 text-right text-sm text-slate-500"><span id="q2v">50</span>/100</div>
      </div>
      <!-- Q3 -->
      <div class="bg-white rounded-2xl shadow p-6">
        <label for="q3" class="block text-sm font-semibold text-slate-700">Q3. ì‚¬ëŒë“¤ê³¼ ìˆì„ ë•Œ <span class="text-emerald-700">ì¡°ìš©í•¨</span> ğŸ™Š â†” <span class="text-orange-600">í™œë°œí•¨</span> ğŸ‰</label>
        <div class="mt-4 flex items-center gap-3">
          <span class="text-xs text-slate-500">ì¡°ìš©í•¨</span>
          <input id="q3" type="range" min="0" max="100" value="50" class="flex-1" />
          <span class="text-xs text-slate-500">í™œë°œí•¨</span>
        </div>
        <div class="mt-2 text-right text-sm text-slate-500"><span id="q3v">50</span>/100</div>
      </div>

      <div class="flex gap-3">
        <button id="resetBtn" class="px-4 py-2 rounded-xl bg-slate-200 hover:bg-slate-300 text-slate-800 font-medium shadow">ì´ˆê¸°í™”</button>
        <button id="randomBtn" class="px-4 py-2 rounded-xl bg-slate-900 hover:bg-black text-white font-medium shadow">ëœë¤</button>
      </div>
    </section>

    <!-- Right: Result -->
    <aside class="bg-white rounded-2xl shadow p-6 flex flex-col gap-4">
      <div>
        <h2 class="text-xl font-bold">ê²°ê³¼</h2>
        <p class="text-slate-500 text-sm">ì‘ë‹µì— ë”°ë¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒ‰ìƒì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
      </div>

      <div id="swatch" class="h-48 w-full rounded-2xl shadow-inner border border-slate-200"></div>

      <div class="grid grid-cols-3 gap-3 text-sm">
        <div class="p-3 rounded-xl bg-slate-50 border"><div class="text-xs text-slate-500">R</div><div id="rVal" class="font-semibold">0</div></div>
        <div class="p-3 rounded-xl bg-slate-50 border"><div class="text-xs text-slate-500">G</div><div id="gVal" class="font-semibold">0</div></div>
        <div class="p-3 rounded-xl bg-slate-50 border"><div class="text-xs text-slate-500">B</div><div id="bVal" class="font-semibold">0</div></div>
      </div>

      <div class="flex items-center gap-3">
        <div class="text-lg font-mono font-semibold" id="hex">#000000</div>
        <button id="copyBtn" class="px-3 py-2 rounded-lg bg-slate-900 text-white text-sm hover:bg-black">HEX ë³µì‚¬</button>
      </div>

      <div>
        <h3 class="text-sm font-semibold text-slate-700 mb-2">ì„±ê²© í‚¤ì›Œë“œ</h3>
        <div id="keywords" class="flex flex-wrap gap-2 text-xs"></div>
      </div>

      <p class="text-xs text-slate-500 mt-2">â€» ë°ëª¨ëŠ” 3ë¬¸í•­ë§Œ í¬í•¨í•©ë‹ˆë‹¤. ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” 10ë¬¸í•­ ì´ìƒìœ¼ë¡œ í™•ì¥í•˜ê³ , ê°€ì¤‘ì¹˜Â·ì •ê·œí™” ë¡œì§ì„ ë³´ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </aside>
  </main>

  <footer class="max-w-4xl mx-auto px-6 pb-12 text-center text-xs text-slate-500">Â© Demo â€“ Color Psychology Test</footer>

  <script>
    const q1 = document.getElementById('q1');
    const q2 = document.getElementById('q2');
    const q3 = document.getElementById('q3');
    const q1v = document.getElementById('q1v');
    const q2v = document.getElementById('q2v');
    const q3v = document.getElementById('q3v');

    const swatch = document.getElementById('swatch');
    const hexEl = document.getElementById('hex');
    const rEl = document.getElementById('rVal');
    const gEl = document.getElementById('gVal');
    const bEl = document.getElementById('bVal');
    const copyBtn = document.getElementById('copyBtn');

    const resetBtn = document.getElementById('resetBtn');
    const randomBtn = document.getElementById('randomBtn');
    const keywordsEl = document.getElementById('keywords');

    const clamp255 = (x) => Math.max(0, Math.min(255, x));
    const toHex = (n) => n.toString(16).padStart(2, '0');

    function computeRGB() {
      const v1 = Number(q1.value); // calm(0) â†” energy(100)
      const v2 = Number(q2.value); // logic(0) â†” intuition(100)
      const v3 = Number(q3.value); // quiet(0) â†” lively(100)

      // Accumulate raw scores (demo weights based on ì œì•ˆì„œ)
      let R = 0, G = 0, B = 0;

      // Q1: R += v1; B += (100 - v1)
      R += v1;
      B += (100 - v1);

      // Q2: B += (100 - v2); R += 0.5*v2; G += 0.5*v2
      B += (100 - v2);
      R += 0.5 * v2;
      G += 0.5 * v2;

      // Q3: G += (100 - v3); R += v3
      G += (100 - v3);
      R += v3;

      // Normalize to 0~255 using channel-wise scaling by the max channel to preserve hue and maximize vividness
      const maxVal = Math.max(R, G, B, 1);
      const scale = 255 / maxVal;
      R = Math.round(clamp255(R * scale));
      G = Math.round(clamp255(G * scale));
      B = Math.round(clamp255(B * scale));

      return { R, G, B };
    }

    function render() {
      q1v.textContent = q1.value; q2v.textContent = q2.value; q3v.textContent = q3.value;
      const { R, G, B } = computeRGB();
      const hex = `#${toHex(R)}${toHex(G)}${toHex(B)}`.toUpperCase();
      swatch.style.backgroundColor = hex;
      hexEl.textContent = hex;
      rEl.textContent = R; gEl.textContent = G; bEl.textContent = B;

      // keywords by channel ranking
      const channels = [
        { k: 'ì—ë„ˆì§€', v: R, alt: ['ì—´ì •','ë„ì „'] },
        { k: 'ì•ˆì •', v: G, alt: ['ê· í˜•','ì¹œí™”'] },
        { k: 'ì°¨ë¶„', v: B, alt: ['ì‹ ë¢°','ì‚¬ìƒ‰'] },
      ].sort((a,b)=>b.v-a.v);

      keywordsEl.innerHTML = '';
      const pills = [channels[0].k, channels[1].alt[0], channels[2].alt[1]];
      pills.forEach(t=>{
        const span = document.createElement('span');
        span.className = 'px-2.5 py-1 rounded-full bg-slate-100 border text-slate-700';
        span.textContent = t;
        keywordsEl.appendChild(span);
      });
    }

    [q1,q2,q3].forEach(el=> el.addEventListener('input', render));

    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(hexEl.textContent);
        copyBtn.textContent = 'ë³µì‚¬ë¨!';
        setTimeout(()=> copyBtn.textContent = 'HEX ë³µì‚¬', 1200);
      }catch(e){
        alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”.');
      }
    });

    resetBtn.addEventListener('click', ()=>{
      [q1,q2,q3].forEach(el=> el.value = 50);
      render();
    });

    randomBtn.addEventListener('click', ()=>{
      [q1,q2,q3].forEach(el=> el.value = Math.floor(Math.random()*101));
      render();
    });

    // initial render
    render();
  </script>
</body>
</html>
